---
title: å…³äºéšæœºæ•°
date: 2018-12-03
categories:  
    - Programing
    - Miscellaneous
tags:
	- Random Number
---
éšæœºæ•°é¡¾åæ€ä¹‰å°±æ˜¯ä½ æ— æ³•ç¡®å®šçš„ä¸€ä¸ªæ•°ï¼ˆä½†æ˜¯ä½ å¯ä»¥è®¾å®šä¸€ä¸ªèŒƒå›´ï¼‰ï¼Œå°±å¥½æ¯”å½©ç¥¨æ‘‡å·ä¸€æ ·ï¼Œæ‰€æœ‰å¯èƒ½çš„ç»„åˆæ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯åˆ°åº•ä¼šæ‘‡å‡ºä¸ªä»€ä¹ˆæ•°å­—å‡ºæ¥ï¼Œè°éƒ½ä¸çŸ¥é“ã€‚å¦åˆ™æˆ‘æ—©å°±ä¹°å½©ç¥¨å»äº†ğŸ˜‚ é‚£éšæœºæ•°æ˜¯æ€ä¹ˆç”Ÿæˆå‡ºæ¥çš„ï¼Ÿ
<!--more-->

# éšæœºæ•°çš„å®šä¹‰
å¼•ç”¨ç»´åŸºç™¾ç§‘ï¼Œ

> æ ¹æ®å¯†ç å­¦åŸç†ï¼Œéšæœºæ•°çš„éšæœºæ€§æ£€éªŒå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ ‡å‡†ï¼š

> * ç»Ÿè®¡å­¦ä¼ªéšæœºæ€§ã€‚ç»Ÿè®¡å­¦ä¼ªéšæœºæ€§æŒ‡çš„æ˜¯åœ¨ç»™å®šçš„éšæœºæ¯”ç‰¹æµæ ·æœ¬ä¸­ï¼Œ1çš„æ•°é‡å¤§è‡´ç­‰äº0çš„æ•°é‡ï¼ŒåŒç†ï¼Œâ€œ10â€â€œ01â€â€œ00â€â€œ11â€å››è€…æ•°é‡å¤§è‡´ç›¸ç­‰ã€‚ç±»ä¼¼çš„æ ‡å‡†è¢«ç§°ä¸ºç»Ÿè®¡å­¦éšæœºæ€§ã€‚æ»¡è¶³è¿™ç±»è¦æ±‚çš„æ•°å­—åœ¨äººç±»â€œä¸€çœ¼çœ‹ä¸Šå»â€æ˜¯éšæœºçš„ã€‚
> * å¯†ç å­¦å®‰å…¨ä¼ªéšæœºæ€§ã€‚å…¶å®šä¹‰ä¸ºï¼Œç»™å®šéšæœºæ ·æœ¬çš„ä¸€éƒ¨åˆ†å’Œéšæœºç®—æ³•ï¼Œä¸èƒ½æœ‰æ•ˆçš„æ¼”ç®—å‡ºéšæœºæ ·æœ¬çš„å‰©ä½™éƒ¨åˆ†ã€‚
> * çœŸéšæœºæ€§ã€‚å…¶å®šä¹‰ä¸ºéšæœºæ ·æœ¬ä¸å¯é‡ç°ã€‚å®é™…ä¸Šè¡¹è¦ç»™å®šè¾¹ç•Œæ¡ä»¶ï¼ŒçœŸéšæœºæ•°å¹¶ä¸å­˜åœ¨ï¼Œå¯æ˜¯å¦‚æœäº§ç”Ÿä¸€ä¸ªçœŸéšæœºæ•°æ ·æœ¬çš„è¾¹ç•Œæ¡ä»¶ååˆ†å¤æ‚ä¸”éš¾ä»¥æ•æ‰ï¼ˆæ¯”å¦‚è®¡ç®—æœºå½“åœ°çš„æœ¬åº•è¾å°„^[æœ¬ä½“è¾å°„æ˜¯æŒ‡äººç±»ç”Ÿæ´»ç¯å¢ƒæœ¬æ¥å­˜åœ¨çš„è¾å°„ï¼Œä¸»è¦åŒ…æ‹¬å®‡å®™å°„çº¿å’Œè‡ªç„¶ç•Œä¸­å¤©ç„¶æ”¾å°„æ€§æ ¸ç´ å‘å‡ºçš„å°„çº¿ã€‚]æ³¢åŠ¨å€¼ï¼‰ï¼Œå¯ä»¥è®¤ä¸ºç”¨è¿™ä¸ªæ–¹æ³•æ¼”ç®—å‡ºæ¥äº†çœŸéšæœºæ•°ã€‚ä½†å®é™…ä¸Šï¼Œè¿™ä¹Ÿåªæ˜¯éå¸¸æ¥è¿‘çœŸéšæœºæ•°çš„ä¼ªéšæœºæ•°ï¼Œä¸€èˆ¬è®¤ä¸ºï¼Œæ— è®ºæ˜¯æœ¬åœ°è¾å°„ã€ç‰©ç†å™ªéŸ³ã€æŠ›ç¡¬å¸â€¦â€¦ç­‰éƒ½æ˜¯å¯è¢«è§‚å¯Ÿäº†è§£çš„ï¼Œä»»ä½•åŸºäºç»å…¸åŠ›å­¦äº§ç”Ÿçš„éšæœºæ•°ï¼Œéƒ½åªæ˜¯ä¼ªéšæœºæ•°ã€‚

> ç›¸åº”çš„ï¼Œéšæœºæ•°ä¹Ÿåˆ†ä¸ºä¸‰ç±»ï¼š

> * ä¼ªéšæœºæ•°ï¼šæ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶çš„éšæœºæ•°ã€‚
> * å¯†ç å­¦å®‰å…¨çš„ä¼ªéšæœºæ•°ï¼šåŒæ—¶æ»¡è¶³å‰ä¸¤ä¸ªæ¡ä»¶çš„éšæœºæ•°ã€‚å¯ä»¥é€šè¿‡å¯†ç å­¦å®‰å…¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨è®¡ç®—å¾—å‡ºã€‚
> * çœŸéšæœºæ•°ï¼šåŒæ—¶æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶çš„éšæœºæ•°ã€‚

# Linuxç³»ç»Ÿä¸­çš„éšæœºæ•°è®¾å¤‡

Linuxä»¥åŠä¸€äº›ç±»Unixç³»ç»Ÿä¸­æœ‰éšæœºæ•°çš„ç‰¹æ®Šæ–‡ä»¶ï¼Œä¸€èˆ¬å¦‚ä¸‹ï¼š

* /dev/random :æä¾›åŸºäºå½“å‰ç³»ç»Ÿç†µæ± ^[æŒ‡è®¾å¤‡é©±åŠ¨ç¨‹åºæˆ–å…¶å®ƒæ¥æºçš„èƒŒæ™¯å™ªå£°è®¡ç®—å‡ºæ¥çš„æŸç§ç»“æœ]çš„çœŸéšæœºæ•°
* /dev/urandom:æ˜¯éé˜»å¡çš„éšæœºæ•°ç”Ÿæˆå™¨

ä¸¤è€…éƒ½æ˜¯CSPRNG^[Cryptographically Secure Pseudorandom Number Generatorï¼ŒåŠ å¯†å®‰å…¨çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨]ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è¾“å‡ºï¼š

```bash
od -An -N1 -i /dev/random
```

# ä¸€äº›ä¼ªéšæœºæ•°ç”Ÿæˆç®—æ³•

## å¹³æ–¹å–ä¸­æ³•

è¿™ä¸ªç®—æ³•æ¯”è¾ƒç®€å•ï¼Œç”±å†¯Â·è¯ºä¼Šæ›¼åœ¨1946å¹´æå‡ºã€‚ ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š

* é€‰æ‹©ä¸€ä¸ª ${\displaystyle m}$ ä½æ•° ${\displaystyle N_{i}}$ ä½œä¸ºç§å­
* è®¡ç®— ${\displaystyle N_{i}^{2}}$
* è‹¥ ${\displaystyle N_{i}^{2}}$ä¸è¶³ ${\displaystyle 2m}$ä¸ªä½ï¼Œåœ¨å‰è¡¥0ã€‚åœ¨è¿™ä¸ªæ•°é€‰ä¸­é—´ ${\displaystyle m}$ä¸ªä½çš„æ•°ï¼Œå³ ${\displaystyle 10^{\lfloor {\frac {m}{2}}\rfloor +1}} {\displaystyle 10^{\lfloor {\frac {m}{2}}\rfloor +1}}$è‡³ ${\displaystyle 10^{\lfloor {\frac {m}{2}}\rfloor +m}} {\displaystyle 10^{\lfloor {\frac {m}{2}}\rfloor +m}}$çš„æ•°ï¼Œå°†ç»“æœä½œä¸º ${\displaystyle N_{i+1}}$


## çº¿æ€§åŒä½™æ³•

è¿™ä¸ªç®—æ³•æ ¹æ®é€’å½’å…¬å¼è®¡ç®—:

$$
X_{n+1}=\left(aX_{n}+c\right)~~{\bmod {~}}~m
$$

Javaä¸­çš„Randomç±»å°±æ˜¯ä½¿ç”¨å°±æ˜¯è¿™ç§ç®—æ³•ã€‚ä½†è¿™ä¸ªä¸æ˜¯å¯†ç å­¦å®‰å…¨çš„éšæœºæ•°ç®—æ³•ï¼Œå¦‚æœè¦ç”Ÿæˆå¯†ç å­¦å®‰å…¨çš„éšæœºæ•°ï¼Œéœ€è¦ä½¿ç”¨SecureRandomç±»æ¥ç”Ÿæˆã€‚

## Blum Blum Shub

é‡‡ç”¨å¦‚ä¸‹çš„é€’å½’å…¬å¼è®¡ç®—ï¼š

$$
x_{n+1}=x_{n}^{2}{\bmod  M}
$$

å…¶ä¸­ï¼š$M=p\cdot q$æ˜¯ä¸¤ä¸ªå¤§ç´ æ•°på’Œqçš„ä¹˜ç§¯

ä¾‹å¦‚ä»¤${\displaystyle p=11}$, ${\displaystyle q=19}$, ${\displaystyle s=3}$ï¼Œåˆ™ï¼š

#. ${\displaystyle x_{0}=3^{2}{\bmod 209}=9}$
#. ${\displaystyle x_{1}=9^{2}{\bmod 209}=81}$
#. ${\displaystyle x_{2}=81^{2}{\bmod 209}=82}$
#. ${\displaystyle x_{3}=82^{2}{\bmod 209}=36}$
#. ...

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„éšæœºæ•°ç®—æ³•ï¼Œä¾¿ä¸è¿‡å¤šä»‹ç»ã€‚

å‚è€ƒ: 

* [Myths about /dev/urandom](http://www.2uo.de/myths-about-urandom/)
* [ä¸€ä¸ªç”Ÿæˆä¼ªéšæœºæ•°çš„è¶…çº§ç®—æ³•](http://www.cnblogs.com/Geometry/archive/2011/01/25/1944582.html)
